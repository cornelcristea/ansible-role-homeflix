---
# vars file for homeflix

homeflix_puid: 1000
homeflix_pgid: 1000

homeflix_apps_volume: /opt/homeflix
homeflix_data_volume: /mnt/homeflix
homeflix_data_folders:
  - downloads
  - movies
  - tv

homeflix_bazarr_port: 6767
homeflix_jellyfin_port: 8096
homeflix_jellyfin_port_https: 8920
homeflix_prowlarr_port: 9696
homeflix_qbittorrent_port: 8080
homeflix_radarr_port: 7878
homeflix_seerr_port: 5055
homeflix_sonarr_port: 8989

homeflix_docker_services:
  - name: bazarr # subtitles manager
    image: lscr.io/linuxserver/bazarr:latest
    ports:
      - "{{ homeflix_bazarr_port }}:6767"

  - name: flaresolverr # cloudflare protection skipper
    image: ghcr.io/flaresolverr/flaresolverr:latest
    ports:
      - "8191:8191" # do not change (database dependent)

  - name: jellyfin # media server app
    image: lscr.io/linuxserver/jellyfin:latest
    ports:
      - "{{ homeflix_jellyfin_port }}:8096"
      - "{{ homeflix_jellyfin_port_https }}:8920"
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.jellyfin.rule=Host(`{{ homeflix_jellyfin_domain }}`)"
      - "traefik.http.routers.jellyfin.entrypoints=https"
      - "traefik.http.routers.jellyfin.tls=true"
      - "traefik.http.routers.jellyfin.tls.certresolver=letsencrypt"
      - "traefik.http.services.jellyfin.loadbalancer.server.port=8096"

  - name: qbittorrent # download client
    image: lscr.io/linuxserver/qbittorrent:latest
    ports:
      - "{{ homeflix_qbittorrent_port }}:8080"
      - "6881:6881/tcp"
      - "6881:6881/udp"

  - name: radarr # movies manager
    image: lscr.io/linuxserver/radarr:latest
    ports:
      - "{{ homeflix_radarr_port }}:7878"

  - name: recyclarr # organizer as code for radarr and sonarr
    image: ghcr.io/recyclarr/recyclarr:latest
    ports: []

  - name: prowlarr # indexers manager
    image: lscr.io/linuxserver/prowlarr:latest
    ports:
      - "{{ homeflix_prowlarr_port }}:9696"

  - name: seerr # media requester
    image: ghcr.io/hotio/seerr:latest
    ports:
      - "{{ homeflix_seerr_port }}:5055"

  - name: sonarr # tv shows manager
    image: lscr.io/linuxserver/sonarr:latest
    ports:
      - "{{ homeflix_sonarr_port }}:8989"

homeflix_jellyfin_host: 
  "{{ homeflix_jellyfin_domain if homeflix_traefik_network is defined else 'localhost' ~ ':' ~ homeflix_jellyfin_port }}"
